{"is_source_file": true, "format": "Python (Django REST Framework)", "description": "This file contains API view functions for handling user profiles, Tatkal train bookings, payment processing via Razorpay, and related operations. It includes endpoints for CRUD operations on user profiles, initiating and tracking bookings, payment initiation and callback handling, auto-fill suggestions, and health checks.", "external_files": ["rest_framework.decorators", "rest_framework.permissions", "rest_framework.response", "rest_framework.status", "django.contrib.auth.models.User", ".models", ".serializers"], "external_methods": ["api_view", "permission_classes", "AllowAny", "Response", "status", "User.objects.get", "UserProfile.objects.all", "UserProfileSerializer", "TatkalBookingSerializer", "PaymentTransactionSerializer", "PaymentTransaction.objects.create", "PaymentTransaction.objects.get"], "published": ["health", "user_profile_list_create", "user_profile_detail", "tatkal_booking_create", "tatkal_booking_status", "tatkal_booking_cancel", "auto_fill_suggestions", "payment_initiate", "payment_callback", "payment_status"], "classes": [], "methods": [{"name": "health(request)", "description": "API health check endpoint returning server status.", "scope": "", "scopeKind": ""}, {"name": "user_profile_list_create(request)", "description": "Handles listing all user profiles (GET) or creating a new profile (POST). Creates associated User if username and password are provided.", "scope": "", "scopeKind": ""}, {"name": "user_profile_detail(request, user_id)", "description": "Retrieves, updates, or deletes a specific user profile based on user_id.", "scope": "", "scopeKind": ""}, {"name": "tatkal_booking_create(request)", "description": "Creates a new Tatkal booking with initial status 'payment_pending'.", "scope": "", "scopeKind": ""}, {"name": "tatkal_booking_status(request, booking_id)", "description": "Retrieves the current status and details of a specific booking.", "scope": "", "scopeKind": ""}, {"name": "tatkal_booking_cancel(request, booking_id)", "description": "Cancels an existing booking if in a cancellable state, recording feedback.", "scope": "", "scopeKind": ""}, {"name": "auto_fill_suggestions(request, user_profile_id)", "description": "Retrieves or updates auto-fill data for a user profile to assist in booking forms.", "scope": "", "scopeKind": ""}, {"name": "payment_initiate(request)", "description": "Simulates initiation of a Razorpay payment session, generating a mock order ID and payment URL.", "scope": "", "scopeKind": ""}, {"name": "payment_callback(request)", "description": "Handles mocked Razorpay payment success/failure callback, updates booking and payment transaction states.", "scope": "", "scopeKind": ""}, {"name": "payment_status(request, payment_transaction_id)", "description": "Returns current status details of a payment transaction.", "scope": "", "scopeKind": ""}], "calls": ["Response", "UserProfile.objects.all", "UserProfileSerializer", "User.objects.get", "UserProfileSerializer", "UserProfileSerializer", "UserProfileSerializer", "TatkalBookingSerializer", "TatkalBookingSerializer", "TatkalBookingSerializer", "TatkalBookingSerializer", "TatkalBooking.objects.get", "PaymentTransaction.objects.create", "PaymentTransaction.objects.get"], "search-terms": ["TatkalBooking", "payment_initiate", "payment_callback", "auto_fill_suggestions", "user_profile", "booking_status", "payment_transaction", "razorpay"], "state": 2, "file_id": 9, "knowledge_revision": 47, "git_revision": "756eef19971d9e96ddb6cf129a1482dffdc33ec4", "revision_history": [{"26": "1ee4a38a356272713b6d744916e471d3c147316f"}, {"41": "1ee4a38a356272713b6d744916e471d3c147316f"}, {"47": "756eef19971d9e96ddb6cf129a1482dffdc33ec4"}], "ctags": [{"_type": "tag", "name": "RAZORPAY_MOCK_KEY", "path": "/home/kavia/workspace/code-generation/quickbook-tatkal-21a702cc/backend/api/views.py", "pattern": "/^RAZORPAY_MOCK_KEY = \"rzp_test_mocked\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "RAZORPAY_MOCK_SECRET", "path": "/home/kavia/workspace/code-generation/quickbook-tatkal-21a702cc/backend/api/views.py", "pattern": "/^RAZORPAY_MOCK_SECRET = \"secret_key_mocked\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "auto_fill_suggestions", "path": "/home/kavia/workspace/code-generation/quickbook-tatkal-21a702cc/backend/api/views.py", "pattern": "/^def auto_fill_suggestions(request, user_profile_id):$/", "language": "Python", "kind": "function", "signature": "(request, user_profile_id)"}, {"_type": "tag", "name": "drf_status", "path": "/home/kavia/workspace/code-generation/quickbook-tatkal-21a702cc/backend/api/views.py", "pattern": "/^from rest_framework import status as drf_status$/", "language": "Python", "kind": "unknown", "nameref": "unknown:status"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/quickbook-tatkal-21a702cc/backend/api/views.py", "pattern": "/^def health(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "payment_callback", "path": "/home/kavia/workspace/code-generation/quickbook-tatkal-21a702cc/backend/api/views.py", "pattern": "/^def payment_callback(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "payment_initiate", "path": "/home/kavia/workspace/code-generation/quickbook-tatkal-21a702cc/backend/api/views.py", "pattern": "/^def payment_initiate(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "payment_status", "path": "/home/kavia/workspace/code-generation/quickbook-tatkal-21a702cc/backend/api/views.py", "pattern": "/^def payment_status(request, payment_transaction_id):$/", "language": "Python", "kind": "function", "signature": "(request, payment_transaction_id)"}, {"_type": "tag", "name": "tatkal_booking_cancel", "path": "/home/kavia/workspace/code-generation/quickbook-tatkal-21a702cc/backend/api/views.py", "pattern": "/^def tatkal_booking_cancel(request, booking_id):$/", "language": "Python", "kind": "function", "signature": "(request, booking_id)"}, {"_type": "tag", "name": "tatkal_booking_create", "path": "/home/kavia/workspace/code-generation/quickbook-tatkal-21a702cc/backend/api/views.py", "pattern": "/^def tatkal_booking_create(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "tatkal_booking_status", "path": "/home/kavia/workspace/code-generation/quickbook-tatkal-21a702cc/backend/api/views.py", "pattern": "/^def tatkal_booking_status(request, booking_id):$/", "language": "Python", "kind": "function", "signature": "(request, booking_id)"}, {"_type": "tag", "name": "user_profile_detail", "path": "/home/kavia/workspace/code-generation/quickbook-tatkal-21a702cc/backend/api/views.py", "pattern": "/^def user_profile_detail(request, user_id):$/", "language": "Python", "kind": "function", "signature": "(request, user_id)"}, {"_type": "tag", "name": "user_profile_list_create", "path": "/home/kavia/workspace/code-generation/quickbook-tatkal-21a702cc/backend/api/views.py", "pattern": "/^def user_profile_list_create(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}], "hash": "5d0889fd2a8a796b971cb2b41eff799b", "format-version": 4, "code-base-name": "backend", "filename": "backend/api/views.py", "fields": [{"name": "RAZORPAY_MOCK_KEY = \"rzp_test_mocked\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "RAZORPAY_MOCK_SECRET = \"secret_key_mocked\"", "scope": "", "scopeKind": "", "description": "unavailable"}]}